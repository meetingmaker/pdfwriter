{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disabled: 1 */\n/* eslint no-param-reassign: 0 */\n/* eslint class-methods-use-this: 0 */\n/* eslint new-parens: 0 */\n/* eslint semi: [\"error\", \"always\"] */\n// import jsPDF from 'jspdf';\n// import _isNumber from 'lodash/isNumber';\nimport _replace from 'lodash/replace';\nimport _split from 'lodash/split';\n\nfunction rgb2hex(str) {\n  return '#' + str.split(',').map(s => (s.replace(/\\D/g, '') | 0).toString(16)).map(s => s.length < 2 ? '0' + s : s).join('');\n}\n\nfunction findBoldTag(str, open) {\n  let i = 0;\n  const normalText = str.substr(i, open - i);\n  let boldText;\n  i = open + 3;\n  const close = str.indexOf('</b>', i);\n  if (close > i) {\n    boldText = str.substr(i, close - i);\n    i = close + 3;\n  } else {\n    boldText = str.substr(i);\n    i = str.length;\n  }\n  if (i < 0) {\n    i = 0;\n  }\n  return { n: i, normalText, boldText };\n}\n\nfunction findSpanTag(str, open) {\n  // console.log('findSpanTag', str);\n  let i = 0;\n  const normalText = str.substr(i, open - i);\n  const span = {\n    text: '',\n    font: 'n'\n  };\n  const close = str.indexOf('</span>', open);\n  if (close > open) {\n    const spanHTML = str.substr(open, close + 6 - i);\n    i = close + 6;\n    const div = document.createElement('div');\n    div.innerHTML = spanHTML;\n    if (div.firstChild && div.firstChild.style && div.firstChild.style !== undefined) {\n      if (div.firstChild.style.color !== undefined) {\n        span.color = rgb2hex(div.firstChild.style.color);\n      }\n      if (div.firstChild.style.fontWeight === 'bold') {\n        span.font = 'b';\n      }\n    }\n    span.text = div.firstChild.innerText;\n  } else {\n    span.text = str.substr(i);\n    i = str.length;\n  }\n  if (i < 0) {\n    i = 0;\n  }\n  return { i, normalText, span };\n}\n\nclass Pdf {\n  constructor(options = null) {\n    this.host = 'https://nclong87.github.io';\n    this.path = '/pdfwriter';\n    this.data = [];\n    this.options = options;\n  }\n  setHost(host) {\n    this.host = host;\n  }\n  setPath(path) {\n    this.path = path;\n  }\n\n  addPage(options) {\n    this.data.push({\n      type: 'addPage',\n      item: { options }\n    });\n  }\n\n  moveUp(value = 1) {\n    this.data.push({\n      type: 'move',\n      item: { direction: 'up', value }\n    });\n  }\n\n  moveDown(value = 1) {\n    this.data.push({\n      type: 'move',\n      item: { direction: 'down', value }\n    });\n  }\n\n  addIcon(icon, style = null, options = null) {\n    this.data.push({\n      type: 'icon',\n      item: { icon, style, options }\n    });\n  }\n\n  addImage(image, options = {}) {\n    this.data.push({\n      type: 'image',\n      item: { image, options }\n    });\n  }\n\n  addText(text, style = null, options = null) {\n    let newContent = _replace(text, '<br/>', '<br>');\n    newContent = _replace(text, '<br></b>', '</b><br>');\n    _split(newContent, '<br>').forEach(text => {\n      if (text.length === 0) {\n        this.data.push({\n          type: 'text',\n          item: { text: ' ', style, options }\n        });\n        return;\n      }\n      const array = [];\n      let max = 0;\n      for (let i = 0; i < text.length; i++) {\n        if (max > 30) {\n          break;\n        }\n        max += 1;\n        const str = text.substr(i);\n        const regex = /(<span|<b>)/g;\n        const matches = regex.exec(str);\n        if (matches) {\n          if (matches[0].includes('<b>')) {\n            const { normalText, boldText, n } = findBoldTag(str, matches.index);\n            i += n;\n            if (normalText) {\n              array.push({\n                text: normalText,\n                type: 'n'\n              });\n            }\n            if (boldText) {\n              array.push({\n                text: boldText,\n                type: 'b'\n              });\n            }\n          } else if (matches[0].includes('<span')) {\n            const findSpanTagResp = findSpanTag(str, matches.index);\n            i += findSpanTagResp.i;\n            const { normalText, span } = findSpanTagResp;\n            const { text, font, color } = span;\n            if (normalText) {\n              array.push({\n                text: normalText,\n                type: 'n'\n              });\n            }\n            if (text) {\n              array.push({\n                text: text,\n                type: font,\n                color: color\n              });\n            }\n          }\n        } else {\n          i = text.length;\n          array.push({\n            text: str,\n            type: 'n'\n          });\n        }\n      }\n      if (array.length === 1 && array[0].type === 'n') {\n        this.data.push({\n          type: 'text',\n          item: { text: array[0].text, style, options }\n        });\n      } else {\n        this.data.push({\n          type: 'formatted-text',\n          item: { text: array, style, options }\n        });\n      }\n    });\n  }\n\n  output() {\n    const { host, path } = this;\n    this.iframe = document.createElement('iframe');\n    this.iframe.style = 'border:0 ;position: fixed;left: 0;top: 0;z-index: 9999;cursor: wait;background-color: #fff;opacity: 0.5;';\n    this.iframe.width = '100%';\n    this.iframe.height = '100%';\n    this.iframe.src = `${host}${path}`;\n    document.body.appendChild(this.iframe);\n    const self = this;\n    const promise = new Promise(resolve => {\n      function handleOnReceivedMessage(event) {\n        if (event.data && event.data.type) {\n          if (event.data.type === 'ready') {\n            const data = {\n              data: self.data,\n              options: self.options\n            };\n            // console.log('data', data);\n            self.iframe.contentWindow.postMessage(data, '*');\n          } else if (event.data.type === 'finish') {\n            // console.log(event.data.data);\n            resolve(event.data.data);\n            document.body.removeChild(self.iframe);\n            window.removeEventListener('message', handleOnReceivedMessage, false);\n          }\n        }\n      }\n      window.addEventListener('message', handleOnReceivedMessage);\n    });\n    return promise\n      .catch(error => {\n        console.log('ERROR', error);\n        return null;\n      });\n  }\n\n  async save(fileName = null) {\n    const blob = await this.output();\n    const url = window.URL.createObjectURL(blob);\n    var a = document.createElement('a');\n    document.body.appendChild(a);\n    a.style = 'display: none';\n    a.href = url;\n    a.download = fileName || 'untitled.pdf';\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n}\n\nexport default Pdf;\n"],"names":["rgb2hex","str","split","map","s","replace","toString","length","join","findBoldTag","open","i","normalText","substr","boldText","close","indexOf","n","findSpanTag","span","text","font","spanHTML","div","document","createElement","innerHTML","firstChild","style","undefined","color","fontWeight","innerText","Pdf","options","host","path","data","push","type","item","value","direction","icon","image","newContent","_replace","_split","forEach","array","max","regex","matches","exec","includes","index","findSpanTagResp","iframe","width","height","src","body","appendChild","self","promise","Promise","resolve","handleOnReceivedMessage","event","contentWindow","postMessage","removeChild","window","removeEventListener","addEventListener","error","console","log","fileName","output","blob","url","URL","createObjectURL","a","href","download","click","revokeObjectURL"],"mappings":"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"}