{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["/* eslint-disabled: 1 */\n/* eslint no-param-reassign: 0 */\n/* eslint class-methods-use-this: 0 */\n/* eslint new-parens: 0 */\n/* eslint semi: [\"error\", \"always\"] */\n// import jsPDF from 'jspdf';\n// import _isNumber from 'lodash/isNumber';\nimport _replace from 'lodash/replace';\nimport _split from 'lodash/split';\n\nfunction rgb2hex(str) {\n  return '#' + str.split(',').map(s => (s.replace(/\\D/g, '') | 0).toString(16)).map(s => s.length < 2 ? '0' + s : s).join('');\n}\n\nfunction findBoldTag(str, open) {\n  let i = 0;\n  const normalText = str.substr(i, open - i);\n  let boldText;\n  i = open + 3;\n  const close = str.indexOf('</b>', i);\n  if (close > i) {\n    boldText = str.substr(i, close - i);\n    i = close + 3;\n  } else {\n    boldText = str.substr(i);\n    i = str.length;\n  }\n  if (i < 0) {\n    i = 0;\n  }\n  return { n: i, normalText, boldText };\n}\n\nfunction findSpanTag(str, open) {\n  // console.log('findSpanTag', str);\n  let i = 0;\n  const normalText = str.substr(i, open - i);\n  const span = {\n    text: '',\n    font: 'n'\n  };\n  const close = str.indexOf('</span>', open);\n  if (close > open) {\n    const spanHTML = str.substr(open, close + 6 - i);\n    i = close + 6;\n    const div = document.createElement('div');\n    div.innerHTML = spanHTML;\n    if (div.firstChild && div.firstChild.style && div.firstChild.style !== undefined) {\n      if (div.firstChild.style.color !== undefined) {\n        span.color = rgb2hex(div.firstChild.style.color);\n      }\n      if (div.firstChild.style.fontWeight === 'bold') {\n        span.font = 'b';\n      }\n    }\n    span.text = div.firstChild.innerText;\n  } else {\n    span.text = str.substr(i);\n    i = str.length;\n  }\n  if (i < 0) {\n    i = 0;\n  }\n  return { i, normalText, span };\n}\n\nclass Pdf {\n  constructor(options = null) {\n    this.host = 'https://nclong87.github.io';\n    this.path = '/pdfwriter';\n    this.data = [];\n    this.options = options;\n  }\n  setHost(host) {\n    this.host = host;\n  }\n  setPath(path) {\n    this.path = path;\n  }\n\n  addPage(options) {\n    this.data.push({\n      type: 'addPage',\n      item: { options }\n    });\n  }\n\n  moveUp(value = 1) {\n    this.data.push({\n      type: 'move',\n      item: { direction: 'up', value }\n    });\n  }\n\n  moveDown(value = 1) {\n    this.data.push({\n      type: 'move',\n      item: { direction: 'down', value }\n    });\n  }\n\n  addIcon(icon, style = null, options = null) {\n    this.data.push({\n      type: 'icon',\n      item: { icon, style, options }\n    });\n  }\n\n  addImage(image, options = {}) {\n    this.data.push({\n      type: 'image',\n      item: { image, options }\n    });\n  }\n\n  addText(text, style = null, options = null) {\n    let newContent = _replace(text, '<br/>', '<br>');\n    newContent = _replace(text, '<br></b>', '</b><br>');\n    _split(newContent, '<br>').forEach(text => {\n      if (text.length === 0) {\n        this.data.push({\n          type: 'text',\n          item: { text: ' ', style, options }\n        });\n        return;\n      }\n      const array = [];\n      let max = 0;\n      for (let i = 0; i < text.length; i++) {\n        if (max > 30) {\n          break;\n        }\n        max += 1;\n        const str = text.substr(i);\n        const regex = /(<span|<b>)/g;\n        const matches = regex.exec(str);\n        if (matches) {\n          if (matches[0].includes('<b>')) {\n            const { normalText, boldText, n } = findBoldTag(str, matches.index);\n            i += n;\n            if (normalText) {\n              array.push({\n                text: normalText,\n                type: 'n'\n              });\n            }\n            if (boldText) {\n              array.push({\n                text: boldText,\n                type: 'b'\n              });\n            }\n          } else if (matches[0].includes('<span')) {\n            const findSpanTagResp = findSpanTag(str, matches.index);\n            i += findSpanTagResp.i;\n            const { normalText, span } = findSpanTagResp;\n            const { text, font, color } = span;\n            if (normalText) {\n              array.push({\n                text: normalText,\n                type: 'n'\n              });\n            }\n            if (text) {\n              array.push({\n                text: text,\n                type: font,\n                color: color\n              });\n            }\n          }\n        } else {\n          i = text.length;\n          array.push({\n            text: str,\n            type: 'n'\n          });\n        }\n      }\n      if (array.length === 1 && array[0].type === 'n') {\n        this.data.push({\n          type: 'text',\n          item: { text: array[0].text, style, options }\n        });\n      } else {\n        this.data.push({\n          type: 'formatted-text',\n          item: { text: array, style, options }\n        });\n      }\n    });\n  }\n\n  output() {\n    const { host, path } = this;\n    this.iframe = document.createElement('iframe');\n    this.iframe.style = 'border:0 ;position: fixed;left: 0;top: 0;z-index: 9999;cursor: wait;background-color: #fff;opacity: 0.5;';\n    this.iframe.width = '100%';\n    this.iframe.height = '100%';\n    this.iframe.src = `${host}${path}`;\n    document.body.appendChild(this.iframe);\n    const self = this;\n    const promise = new Promise(resolve => {\n      function handleOnReceivedMessage(event) {\n        if (event.data && event.data.type) {\n          if (event.data.type === 'ready') {\n            const data = {\n              data: self.data,\n              options: self.options\n            };\n            // console.log('data', data);\n            self.iframe.contentWindow.postMessage(data, '*');\n          } else if (event.data.type === 'finish') {\n            // console.log(event.data.data);\n            resolve(event.data.data);\n            document.body.removeChild(self.iframe);\n            window.removeEventListener('message', handleOnReceivedMessage, false);\n          }\n        }\n      }\n      window.addEventListener('message', handleOnReceivedMessage);\n    });\n    return promise\n      .catch(error => {\n        console.log('ERROR', error);\n        return null;\n      });\n  }\n\n  async save(fileName = null) {\n    const blob = await this.output();\n    const url = window.URL.createObjectURL(blob);\n    var a = document.createElement('a');\n    document.body.appendChild(a);\n    a.style = 'display: none';\n    a.href = url;\n    a.download = fileName || 'untitled.pdf';\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n}\n\nexport default Pdf;\n"],"names":["rgb2hex","str","split","map","s","replace","toString","length","join","findBoldTag","open","i","normalText","substr","boldText","close","indexOf","n","findSpanTag","span","text","font","spanHTML","div","document","createElement","innerHTML","firstChild","style","undefined","color","fontWeight","innerText","Pdf","constructor","options","host","path","data","setHost","setPath","addPage","push","type","item","moveUp","value","direction","moveDown","addIcon","icon","addImage","image","addText","newContent","_replace","_split","forEach","array","max","regex","matches","exec","includes","index","findSpanTagResp","output","iframe","width","height","src","body","appendChild","self","promise","Promise","resolve","handleOnReceivedMessage","event","contentWindow","postMessage","removeChild","window","removeEventListener","addEventListener","catch","error","console","log","save","fileName","blob","url","URL","createObjectURL","a","href","download","click","revokeObjectURL"],"mappings":"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"}